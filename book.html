<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>圈科书城</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="webkit-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no, email=no">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <script src="https://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/pagedown/1.0/Markdown.Converter.js"></script>
    <style>
        span {
            cursor: pointer;
            color: #fa7516;
        }

        a {
            text-decoration: none;
            color: #fa7516;
        }

        a:link {
            text-decoration: none;
        }

        a:visited {
            text-decoration: none;
        }

        a:hover {
            text-decoration: none;
        }

        a:active {
            text-decoration: none;
        }

        a:focus {
            text-decoration: none;
        }

        #tips {
            margin-top: 1rem;
        }

        #tips span {
            padding: 0 0.5rem;
        }
    </style>
</head>
<body>
<div id="root"></div>
<div id="tips"></div>
</body>

<script>
    const converter = new Markdown.Converter();

    function show(url) {
        $.ajax({
            url: url,
            type: 'get',
            success: function (data) {
                const html = converter.makeHtml(data);
                $('#root').html(html);
            }
        });
    }

    function initTips(max) {
        for (let i = 1; i <= max; i++) {
            const num = i.toString().padStart(8, '0');
            const tag = `1/${num}.md`;
            const $span = $('<span>')
                .attr('tag', tag)
                .text(`第${i}章`);
            $('#tips').append($span);
        }
    }

    $(document).ready(function () {
        show("/md/book/1/00000001.md?t=" + new Date().getTime());
        initTips(4);
        $("span").each(function () {
            let tag = $(this).attr("tag");
            $(this).click(function () {
                show("/md/book/" + encodeURI(tag) + "?t=" + new Date().getTime());
            })
        })
    });
</script>

</html>
